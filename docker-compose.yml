{
  "version": "3.1",
  "volumes": {
    "postgres_data": { },
    "nginx_data": { }
  },
  "services": {
    "postgres": {
      "image": "postgres",
      "volumes": [
          "postgres_data:/var/lib/postgresql/data/"
      ],
      "env_file": ".env",
      "ports": [
          "${POSTGRES_PORT}"
      ],
    },
    "admin_panel": {
      "image": "yiisoftware/yii2-php:7.4-apache",
      "volumes": [
          "~/.composer-docker/cache:/root/.composer/cache:delegated",
          "./admin_panel/backend/basic:/app:delegated"
      ],
      "ports": [
#          "${APACHE_PORT_EXT_X}1:${APACHE_PORT_INT_X}1"
          "${YII_POST_EXT}:${YII_POST_INT}"
      ],
      "env_file": ".env",
      "depends_on": [
          "postgres"
      ]
    },
    "front": {
      "build": {
        "context": "./",
        "dockerfile": "Dockerfile-admin-front"
      },
      "ports": [
          "${FRONT_PORT}:${FRONT_PORT}"
      ]
    }
#    ,"nginx": {
#      "build": {
#        "context": "./",
#        "dockerfile": "Dockerfile-nginx"
#      },
#      "env_file": ".env",
#      "ports": [
#          "${NGINX_PORT_EXT}:${NGINX_PORT_INT}"
#      ],
#      "volumes": [
#          "nginx_data:/etc/nginx/templates"
#      ],
#      "links": [
#          "admin_panel",
#          "front"
#      ]
#    }
  }
}
